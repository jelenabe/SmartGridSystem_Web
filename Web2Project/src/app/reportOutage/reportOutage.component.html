<h1 style="margin-left: 43%">Report Outage</h1>

<div
  class="container"
  style="background-color: white; border-radius: 3%; width: 50%"
>
  <form (ngSubmit)="report()" ngNativeValidate #myForm="ngForm">
    <!--Reason-->
    <mat-form-field
      appearance="fill"
      class="example-full-width divStyle"
      style="padding-top: 5%"
    >
      <mat-label>Reason</mat-label>
      <mat-select name="Reason" [(ngModel)]="model.reason" required>
        <mat-option value="1">No electricity</mat-option>
        <mat-option value="2">Failure</mat-option>
        <mat-option value="3">Flickering light</mat-option>
        <mat-option value="4">Electricity is back on</mat-option>
        <mat-option value="5"
          >Partially electricity</mat-option
        >
        <mat-option value="6"
          >Problems with the voltage</mat-option
        >
      </mat-select>
    </mat-form-field>

    <!--Comment-->
    <div *ngIf="res.display == true">
    <mat-form-field class="example-full-width divStyle" >
      <mat-label>Comment</mat-label>
      <input
       [(ngModel)]="model.comment"
         type="text"
        matInput
        name="comment"
        placeholder="Comment..."
      />
    </mat-form-field>
  </div>

    <!--Hazard-->
    <mat-form-field class="example-full-width divStyle" style="padding-top: 3%">
      <mat-label>Hazard</mat-label>
      <input
        type="text"
        matInput
        [(ngModel)]="model.hazard"
        name="hazard"
        placeholder="Hazard..."
        required
      />
    </mat-form-field>

    <h3 style="padding-top: 3%">Consumer info:</h3>
    <!--Anonymous/Consumer-->
    <span>
      <mat-button-toggle-group>
        <mat-button-toggle
          value="all_incidents"
          id="option1"
          (click)="buttonClicked(1)"
        >
          Anonymous</mat-button-toggle
        >
        <mat-button-toggle
          value="mine_incidents"
          id="option2"
          (click)="openDialog($event)"
        >
          Select consumer</mat-button-toggle
        >
      </mat-button-toggle-group>
    </span>

  <div *ngIf="anonymous">
    <mat-form-field appearance="fill" class="example-full-width divStyle" style="padding-top: 5%;">
      <mat-label>Select location</mat-label>

      <mat-select name="LocationId" [(ngModel)]="model.locationId" required>
        <mat-option
          *ngFor="let location of locations"
          value="{{ location.locationId }}"
        >
          {{ formatLocation(location) }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!--Button Reposrt-->
    <div
      class="input-group-prepend"
      style="padding-bottom: 4%; padding-left: 50%"
    >
      <button  [disabled]="myForm.invalid" class="btn btn-primary" type="submit" style="margin-left: 80%">
        Report
      </button>
    </div>
    
  </div>
  <div *ngIf="!anonymous">
    <mat-form-field class="example-full-width divStyle" style="padding-top: 5%;">
      <mat-label>Name</mat-label>
      <input
       [(ngModel)]="modelForShow.name"
         type="text"
        matInput
        name="name"
        readonly
      />
    </mat-form-field>
    <mat-form-field class="example-full-width divStyle">
      <mat-label>Lastname</mat-label>
      <input
       [(ngModel)]="modelForShow.lastname"
         type="text"
        matInput
        name="lastname"
        readonly
      />
    </mat-form-field>
    <mat-form-field class="example-full-width divStyle">
      <mat-label>Location</mat-label>
      <input
       [(ngModel)]="modelForShow.location"
         type="text"
        matInput
        name="location"
        readonly
      />
    </mat-form-field>
    <mat-form-field class="example-full-width divStyle">
      <mat-label>Phone</mat-label>
      <input
       [(ngModel)]="modelForShow.phone"
         type="text"
        matInput
        name="phone"
        readonly
      />
    </mat-form-field>

    <!--Button Reposrt-->
    <div
      class="input-group-prepend"
      style="padding-bottom: 4%; padding-left: 50%"
    >
      <button  [disabled]="myForm.invalid" class="btn btn-primary" type="submit" style="margin-left: 80%">
        Report
      </button>
    </div>
    
  </div>

  </form>
</div>
